(("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]=("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]||[]).push([[11],{1356:function(i,t,e){},"347e":function(i,t,e){"use strict";e("1356")},3488:function(i,t){i.exports=function(i){i.options.__settings={name:"buy_again",label:"Buy Again",props:[{type:"text",id:"title",default:"",label:"Title"},{type:"checkbox",id:"view_all",default:!1,label:"Show View All"},{type:"url",id:"view_all_link",label:"View All Link"},{type:"text",id:"count",default:"3",label:"Min Count to display"},{type:"text",id:"max_count",default:"10",label:"Max Count to display"},{type:"checkbox",id:"diagnostics",default:!1,label:"Diagnostics product"},{type:"checkbox",id:"medicine",default:!1,label:"Medicine product"},{type:"checkbox",id:"beauty",default:!1,label:"Beauty product"},{type:"checkbox",id:"wellness",default:!1,label:"Wellness product"}]}}},"4f7e":function(i,t,e){"use strict";e.r(t);var l=function(){var i,t=this,e=t._self._c;return!t.isLoading&&(null===(i=t.similarProducts)||void 0===i?void 0:i.length)>=t.countProduct?e("div",{staticClass:"section-main-container buyAgain"},[e("heading",{attrs:{"heading-text":t.getHeading,"view-all":t.getViewAll,"view-all-link":t.getViewAllLink}}),e("carousel",{attrs:{items:t.similarProducts}},t._l(t.similarProducts.slice(0,t.maxCount),(function(i,l){var s,o;return e("div",{key:l,staticClass:"buy-again-card"},[t.bestPriceFlag?e("mini-product-card",{attrs:{sectionName:t.getHeading,screenName:"Home Page",product:i,isGenericSection:!1,wishData:t.wishData,bestpricecoupon:(null===i||void 0===i||null===(s=i.tags)||void 0===s?void 0:s.includes("No_Discount"))||"Medicine"!==(null===i||void 0===i||null===(o=i.attributes)||void 0===o?void 0:o.verticalspecification)?{}:t.bestpricecoupon,priceDetails:null===i||void 0===i?void 0:i.priceDetails,carouselclass:"carouselclass"},on:{"default-toast-show":t.defaultToastShow}}):t._e()],1)})),0)],1):t._e()},s=[],o=e("c04a"),a=e("5920"),n=e("2fa3"),u=e("77bf"),d=e("3687"),c=e("893a"),r=e("0163"),v={props:["settings"],components:{heading:n["a"],"intersection-observer":u["a"],"mini-product-card":o["a"],carousel:a["a"]},mixins:[d["a"],c["a"],r["a"]],data(){return{wishData:[],similarProducts:[],itemCode:[],countProduct:0,bestpricecoupon:{},bestPriceFlag:!1,priceDetailsCache:new Map,isLoading:!0,maxCount:0}},computed:{getHeading(){var i,t,e;return(null===(i=this.settings)||void 0===i||null===(t=i.props)||void 0===t||null===(e=t.title)||void 0===e?void 0:e.value)||""},getViewAll(){var i,t,e;return(null===(i=this.settings)||void 0===i||null===(t=i.props)||void 0===t||null===(e=t.view_all)||void 0===e?void 0:e.value)||!1},getViewAllLink(){var i,t,e;return(null===(i=this.settings)||void 0===i||null===(t=i.props)||void 0===t||null===(e=t.view_all_link)||void 0===e?void 0:e.value)||""}},async created(){},async mounted(){var i,t,e,l,s,o,a,n,u,d;console.log("bug again section called"),this.countProduct=parseInt(null===(i=this.settings)||void 0===i||null===(t=i.props)||void 0===t||null===(e=t.count)||void 0===e?void 0:e.value,10)||0;const c=null===(l=this.settings)||void 0===l||null===(s=l.props)||void 0===s||null===(o=s.max_count)||void 0===o?void 0:o.value;if(this.maxCount=c?parseInt(c,10):0,"undefined"===typeof(null===(a=FPI)||void 0===a||null===(n=a.state)||void 0===n||null===(u=n.user)||void 0===u||null===(d=u._data)||void 0===d?void 0:d.user))this.wishData=[];else{var r;const i=await this.$apiSDK.catalog.getFollowIds({collectionType:"products"});this.wishData=(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.products)||[];const t=await this.$apiSDK.order.getOrders({pageSize:100});for(const e of(null===t||void 0===t?void 0:t.items)||[])for(const i of(null===e||void 0===e||null===(v=e.shipments[0])||void 0===v?void 0:v.bags)||[]){var v;if("NFM membership L3"!==i.item["l3_category_name"])try{var p,h,g,f,m,b,w,y,P,_,x,D,k,C,S,F;const t=await this.$apiSDK.catalog.getProductDetailBySlug({slug:i.item.slug_key});console.log(t,"productData"),((null===(p=this.settings)||void 0===p||null===(h=p.props)||void 0===h||null===(g=h.diagnostics)||void 0===g?void 0:g.value)&&"Lab Tests"===(null===t||void 0===t||null===(f=t.attributes)||void 0===f?void 0:f.verticalspecification)||(null===(m=this.settings)||void 0===m||null===(b=m.props)||void 0===b||null===(w=b.medicine)||void 0===w?void 0:w.value)&&"Medicine"===(null===t||void 0===t||null===(y=t.attributes)||void 0===y?void 0:y.verticalspecification)||(null===(P=this.settings)||void 0===P||null===(_=P.props)||void 0===_||null===(x=_.beauty)||void 0===x?void 0:x.value)&&"Beauty"===(null===t||void 0===t||null===(D=t.attributes)||void 0===D?void 0:D.verticalspecification)||(null===(k=this.settings)||void 0===k||null===(C=k.props)||void 0===C||null===(S=C.wellness)||void 0===S?void 0:S.value)&&"Wellness"===(null===t||void 0===t||null===(F=t.attributes)||void 0===F?void 0:F.verticalspecification))&&(this.itemCode.includes(i.item.id)||(this.similarProducts.push(t),this.itemCode.push(i.item.id)))}catch(A){console.error("Error fetching product details:",A)}}console.log(this.similarProducts,"similarProducts"),this.similarProducts.length>0&&this.$nextTick(()=>{this.fetchPriceDetailsForProducts()}),(this.bestpricecoupon.length>0||this.similarProducts.length>=this.countProduct)&&(this.bestpricecoupon=await this.getBestPriceCoupon(),this.bestPriceFlag=!0)}},methods:{defaultToastShow(i,t){"success"===t?this.showSuccessToast(i):this.showErrorToast(i)},findItemBySlug(i,t){return i.find(i=>i.slug===t)||{}},async fetchPriceDetailsForProducts(){try{const{updatedProducts:i,newIndex:t}=await this.fetchPricesForNewItems(this.similarProducts,0);this.similarProducts=i,this.isLoading=!1,console.log(this.similarProducts,"fetchPricesForNewItems")}catch(i){console.error("Error fetching price details:",i)}}}},p=v,h=(e("347e"),e("2877")),g=e("9826"),f=Object(h["a"])(p,l,s,!1,null,"54fc4e5a",null);"function"===typeof g["default"]&&Object(g["default"])(f);t["default"]=f.exports},9826:function(i,t,e){"use strict";var l=e("3488"),s=e.n(l);t["default"]=s.a}}]);
//# sourceMappingURL=zWvzH8L93_themeBundle.umd.min.BuyAgainSectionChunk.js.map