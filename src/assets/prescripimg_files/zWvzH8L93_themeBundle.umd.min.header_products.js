(("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]=("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]||[]).push([[6],{"005e":function(e,t,i){"use strict";i("b7eb")},"0c0b":function(e,t,i){},"12dd":function(e,t,i){"use strict";i("1e64")},"1e64":function(e,t,i){},"341d":function(e,t,i){"use strict";i("a7c5")},"3ebe":function(e,t,i){"use strict";i("edc6")},5196:function(e,t,i){"use strict";i("aaf2b")},8028:function(e,t,i){"use strict";i("9167")},8923:function(e,t,i){},9121:function(e,t,i){},9167:function(e,t,i){},a7c5:function(e,t,i){},aaf2b:function(e,t,i){},b560:function(e,t,i){"use strict";i("0c0b")},b7eb:function(e,t,i){},ca38:function(e,t,i){},dcbf:function(e,t,i){"use strict";i("9121")},e068:function(e,t,i){"use strict";i("8923")},e141:function(e,t,i){"use strict";i("ca38")},edc6:function(e,t,i){},fd67:function(e,t,i){"use strict";var s=function(){var e,t,i,s,d,o=this,a=o._self._c;return a("div",{staticClass:"mw-100"},[a("div",{staticClass:"container-wrap"},[a("fdk-pincode",{ref:"main-pdp-pincode"}),a("div",{ref:"deliveryAddress",staticClass:"col-lg-12 col-md-6 col-sm-4 jm-mr-xxs jm-pv-s pincode-section custom-height40",on:{click:function(e){return e.stopPropagation(),o.showHideDeliveryPopup(!0)}}},[a("span",{staticClass:"pincode-text"},[a("img",{staticClass:"for-nonmobile",attrs:{src:o.imgbaseURL+"images/ic_location_header.svg",alt:"Current location",height:"20",width:"20"}}),a("img",{staticClass:"for-mobile",attrs:{src:o.imgbaseURL+"images/ic-location-mobile.svg",alt:"Current location",height:"20",width:"20"}}),a("span",{staticClass:"jm-body-xs jm-ph-xxs jm-d-inlineblock jm-body-xs jm-body-sm-xxs label"},[o.userPincode&&o.pincode_city?a("span",{staticClass:"supporting-label"},[o._v("Deliver to")]):o._e(),o.username&&""!==o.username&&null!==o.username?a("span",{staticClass:"user-info"},[o._v(" "+o._s(o.username.trim().substring(0,10))+o._s((null===(e=o.username)||void 0===e?void 0:e.length)>10?"..,":"")+o._s((null===(t=o.username)||void 0===t?void 0:t.length)<10?",":"")+" ")]):o._e(),o.pincode_city?a("span",{staticClass:"city-info"},[o._v(" "+o._s(null===(i=o.pincode_city)||void 0===i?void 0:i.trim().substring(0,12))+o._s((null===(s=o.pincode_city)||void 0===s?void 0:s.length)>12?"..,":"")+o._s((null===(d=o.pincode_city)||void 0===d?void 0:d.length)<12?",":"")+" ")]):o._e(),o.userPincode?a("span",{staticClass:"jm-d-inlineblock jm-body-sm-xxs jm-body-xs-bold label city-info",class:{"text-bold":o.isMobileLayout}},[o._v(o._s(o.userPincode))]):o._e()]),o.isMobileLayout?a("span",{staticClass:"jm-body-xs jm-d-inlineblock change-btn",on:{click:function(e){o.isMobileLayout&&o.modalHandle()}}},[a("img",{attrs:{src:o.imgbaseURL+"images/ic-mobile-drop-down.svg",alt:"Change location"}})]):o._e()]),o.showDeliveryPopup&&o.isMobileLayout?a("modal",{ref:"deliveryPopup",staticClass:"pinPopup",attrs:{"is-open":o.modalVisible},on:{closedialog:function(e){return o.onCloseModal()}}},[a("pincode-card",{on:{updatePincode:o.updatePincode,addressSelected:o.addressSelected}})],1):o._e()],1),o.showDeliveryPopup&&!o.isMobileLayout?a("div",{ref:"deliveryPopup",staticClass:"tooltip",class:{}},[a("pincode-card",{on:{updatePincode:o.updatePincode,addressSelected:o.addressSelected}})],1):o._e()],1),o.showDeliveryPopup&&!o.isMobileLayout?a("div",{staticClass:"backdrop",staticStyle:{display:"block"},on:{click:function(e){return o.showHideDeliveryPopup(!1)}}}):o._e()])},d=[],o=i("2463"),a=i("2146"),n=i("1be1"),r=i("2782"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white border rounded-3 pincode-card"},[t(e.currentComponent,{tag:"component",on:{"toggle-component":e.toggleComponent,updatePincode:e.updatePincode,addressSelected:e.addressSelected}})],1)},c=[],u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pinCode-box"},[t("pincode-card-header",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Enter your area PIN Code ")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Type the PIN Code to check product availability, offers and more. ")]},proxy:!0}])}),t("fdk-pincode",{ref:"pdp-pincode",scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"d-flex align-items-center"},[t("div",{staticClass:"did-floating-label-content"},[t("img",{staticClass:"location-icon",attrs:{src:e.imgbaseURL+"images/pincode.svg"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pincode,expression:"pincode"}],staticClass:"did-floating-input",class:{"border-2 border-danger":null!==e.pincodeError&&""!==e.pincodeError,"border-2 border-success":""==e.pincodeError&&""!=e.city&&""!=e.state},attrs:{type:"tel",pattern:"[0-9]*",placeholder:"",autofocus:"",autocomplete:"off",maxlength:"6",onkeypress:"return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))"},domProps:{value:e.pincode},on:{input:[function(t){t.target.composing||(e.pincode=t.target.value)},function(t){return e.getpincodeDetails(t,i)}]}}),t("label",{staticClass:"did-floating-label"},[t("span",[e._v("PIN Code")])]),t("div",{staticClass:"text-start text-block"},[""!=e.pincodeError?t("div",{staticClass:"error-text"},[e._v(" "+e._s(e.pincodeError)+" ")]):""!=e.city&&""!=e.state?t("div",{staticClass:"jm-body-xs jm-fc-light-feedback-success-80"},[e._v(" "+e._s(e.city)+", "+e._s(e.state)+" ")]):e._e()])]),t("div",{staticClass:"align-self-start pl-1 apply-btn"},[t("button",{staticClass:"btn",class:{disabled:6!=e.pincode.length||""!=e.pincodeError},attrs:{type:"button"},on:{click:e.applyBtnClick}},[e._v("Apply")])])])]}}])})],1)},p=[],h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"headerTxt"},[t("div",{staticClass:"delivery-title"},[e._t("title")],2),t("div",{staticClass:"delivery-desc"},[e._t("description")],2)])},v=[],m={name:"pincode-card-header"},b=m,g=(i("8028"),i("2877")),f=Object(g["a"])(b,h,v,!1,null,"1f82124a",null),_=f.exports,y=i("2bb5"),P=i("31c9"),E={name:"pincode-area-input-form",components:{"pincode-card-header":_},mixins:[P["a"]],data:function(){return{pincode:"",pincodeError:"",disableBtn:!0,city:"",state:"",imgbaseURL:y["a"].BaseUrl}},mounted(){},methods:{applyBtnClick(){6==this.pincode.length&&(this.handleKeyPress(event,this.$refs["pdp-pincode"]),a["a"].addOrUpdateItem(a["b"].USER_SELECTED_LAB,!0))},async getpincodeDetails(e,t){this.pincode.length>6&&(e.preventDefault(),this.pincodeError=""),6==this.pincode.length?await t.pinCodeDetails(this.pincode).then(e=>{var t,i;this.city=(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.city)||"",this.state=(null===e||void 0===e||null===(i=e.details)||void 0===i?void 0:i.state)||"",this.pincodeError="",this.disableBtn=!1}).catch(e=>{this.pincodeError="Not delivering at this location,\n please try another PIN Code."}):this.pincodeError=""},handleKeyPress(e,t){this.pincode.length>6&&(e.preventDefault(),this.pincodeError=""),6==this.pincode.length?(this.pincodeError="",t.validatePincode(this.pincode).then(e=>{if(e){this.pincodeError="",this.disableBtn=!1;try{var t;null===(t=FPI.state.global.location)||void 0===t||t.subscribe(e=>{if(e){if(this.city=(null===e||void 0===e?void 0:e.city)||"",this.state=(null===e||void 0===e?void 0:e.state)||"",this.$emit("updatePincode",{pincode_city:this.city,pincode_state:this.state,userPincode:this.pincode}),Object(n["cb"])()){const e=["/cart/bag"],t=this.$router.currentRoute.path;e.includes(t)||this.showNavBar()}a["a"].removeItem(a["b"].SELECTED_ADDRESS),a["a"].removeItem(a["b"].USER_NAME)}else this.pincodeError="Unable to get location details"})}catch(i){console.log(err,"err"),this.pincodeError=err}}}).catch(e=>{console.log("err",e),this.pincodeError="Not delivering at this location,\n please try another PIN Code."})):(this.city="",this.state="",this.pincodeError="")}}},C=E,S=(i("b560"),Object(g["a"])(C,u,p,!1,null,"c9c8ab90",null)),A=S.exports,w=function(){var e=this,t=e._self._c;return t("div",[t("pincode-card-header",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Where do you want the delivery? ")]},proxy:!0},{key:"description",fn:function(){return[e._v(" "+e._s(e.getDescription())+" ")]},proxy:!0}])}),t("pincode-card-content",{on:{addressSelected:e.addressSelected,getAddressList:e.getAddressList}}),t("pincode-card-footer",{on:{"toggle-component":e.toggleComponent,updatePincode:e.updatePincode,addressSelected:e.addressSelected}})],1)},D=[],O=function(){var e=this,t=e._self._c;return t("div",[t("fdk-accounts",{scopedSlots:e._u([{key:"default",fn:function(i){return[i.is_logged_in?t("select-address",{on:{addressSelected:e.addressSelected,getAddressList:e.getAddressList}}):t("sign-in-btn")]}}])})],1)},U=[],I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-grid"},[t("fdk-accounts",{scopedSlots:e._u([{key:"default",fn:function(i){return[t("button",{staticClass:"btn rounded-5",attrs:{type:"button"},on:{click:function(t){return e.signInHandler(i)}}},[e._v(" Sign in to select address")])]}}])})],1)},R=[],L={name:"sign-in-btn",mixins:[P["a"]],methods:{signIn(){},signInHandler(e){Object(n["cb"])()?null===P["a"]||void 0===P["a"]||P["a"].methods.openLogin():e.openLogin()}}},k=L,x=(i("12dd"),Object(g["a"])(k,I,R,!1,null,"a5e5df7a",null)),$=x.exports,j=function(){var e=this,t=e._self._c;return t("fdk-addresses",{ref:"addressList",scopedSlots:e._u([{key:"default",fn:function(i){var s,d;return[t("div",{staticClass:"address-list"},[i.addresses.address?t("vue-slick-carousel",e._b({scopedSlots:e._u([{key:"prevArrow",fn:function(i){return[t("div",{staticClass:"prev-btn carousel-btn"},[t("img",{attrs:{src:e.imgbaseURL+"images/arrow-left.svg",alt:"Previous"}})])]}},{key:"nextArrow",fn:function(i){return[t("div",{staticClass:"next-btn carousel-btn"},[t("img",{attrs:{src:e.imgbaseURL+"images/arrow-right.svg",alt:"Next"}})])]}}],null,!0)},"vue-slick-carousel",e.settings,!1),[e._l(e.sortedAddresses(i.addresses.address),(function(i,s){return t("div",{key:s,staticClass:"item"},[t("address-card",{attrs:{address:i,selected:i.id==e.selectedAddress||!e.selectedAddress&&!e.fpiPincode&&(null===i||void 0===i?void 0:i.is_default_address)},on:{addressSelected:e.addressSelected}})],1)})),(null===(s=i.addresses.address)||void 0===s?void 0:s.length)<10&&(!e.fromReviewPage||"fromReviewPage"!==e.fromReviewPage)?t("div",{staticClass:"item"},[t("add-address-card",{attrs:{disabled:10===(null===(d=i.addresses.address)||void 0===d?void 0:d.length)},on:{addressSelected:e.addressSelected}})],1):e._e()],2):e._e()],1)]}}])})},N=[],T=function(){var e=this,t=e._self._c;return t("fdk-pincode",{ref:"pdp-pincode",scopedSlots:e._u([{key:"default",fn:function(i){var s,d,o,a,n;return[t("div",{staticClass:"d-flex flex-column shadow text-start select-card",class:{selected:e.selected,"bg-white":!e.selected},on:{click:function(t){return e.addressSelected(e.address,i)}}},[t("div",{staticClass:"user-name"},[e._v(e._s(null===(s=e.address)||void 0===s?void 0:s.name)+" ")]),t("div",{staticClass:"address"},[t("span",{staticClass:"city"},[e._v(e._s(e.truncatedAddress((null===(d=e.address)||void 0===d?void 0:d.address)+""))+" "+e._s(null===(o=e.address)||void 0===o?void 0:o.city))]),t("div",{staticClass:"d-block"},[e._v(e._s(null===(a=e.address)||void 0===a?void 0:a.area_code))])]),t("div",{staticClass:"type mt-auto"},[t("button",{staticClass:"btn",class:{"btn-secondary":!e.selected}},[e._v(e._s(e.capitalizeFirstLetter(null===(n=e.address)||void 0===n?void 0:n.address_type)))])]),t("div",{staticClass:"note"},[e._v(" "+e._s(e.truncatedAddress(e.note+""))+" ")])])]}}])})},M=[],B={name:"address-card",data(){return{note:""}},props:{address:function(){return""},selected:function(){return""}},mounted(){},methods:{capitalizeFirstLetter(e){var t;return(null===e||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))},truncatedAddress(e){return"string"===typeof e?e.length<=50?e:(null===e||void 0===e?void 0:e.substring(0,45))+"...":""},addressSelected(e,t){this.note="",t.validatePincode(String(null===e||void 0===e?void 0:e.area_code)).then(t=>{t&&this.makeDefault(e)}).catch(e=>{console.log("err",e),this.note=e})},async makeDefault(e){try{const t={is_default_address:!0,name:null===e||void 0===e?void 0:e.name,phone:null===e||void 0===e?void 0:e.phone,address:null===e||void 0===e?void 0:e.address,area:null===e||void 0===e?void 0:e.area,landmark:null===e||void 0===e?void 0:e.landmark,area_code:null===e||void 0===e?void 0:e.area_code,address_type:null===e||void 0===e?void 0:e.address_type,country_code:null===e||void 0===e?void 0:e.country_code,...null===e||void 0===e?void 0:e.geo_location};t._custom_json={location_type:"mapped"},await this.$apiSDK.cart.updateAddress({id:null===e||void 0===e?void 0:e.id,body:t}),a["a"].addOrUpdateItem(a["b"].SELECTED_ADDRESS,null===e||void 0===e?void 0:e.id),a["a"].addOrUpdateItem(a["b"].USER_NAME,null===e||void 0===e?void 0:e.name),this.$emit("addressSelected",e)}catch(err){console.log("update address error in address card ",err),a["a"].addOrUpdateItem(a["b"].SELECTED_ADDRESS,null===e||void 0===e?void 0:e.id),a["a"].addOrUpdateItem(a["b"].USER_NAME,null===e||void 0===e?void 0:e.name),this.$emit("addressSelected",e)}}}},H=B,W=(i("005e"),Object(g["a"])(H,T,M,!1,null,"1b758bcc",null)),F=W.exports,q=function(){var e=this,t=e._self._c;return t("fdk-accounts",{scopedSlots:e._u([{key:"default",fn:function(i){return[i.is_logged_in?t("div",{staticClass:"d-flex col shadow text-start select-card",class:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.onAddNewAddress.apply(null,arguments)}}},[t("div",{staticClass:"add-address-content"},[t("img",{staticClass:"jm-pr-lg-s jm-mb-xs shadow",attrs:{src:e.imgbaseURL+"images/add-address-icon.svg"}}),t("div",{staticClass:"jm-body-xs-bold jm-ta-center"},[e._v(" Add new address ")])])]):e._e()]}}])})},K=[],Y={name:"add-address-card",props:{disabled:{type:Boolean,default:!1}},methods:{onAddNewAddress(){this.$emit("addressSelected",null);const e=encodeURIComponent(this.$route.fullPath);this.$router.push("/profile/address?edit=true&last_page=true&page_url="+e)}},data(){return{imgbaseURL:y["a"].BaseUrl}},mounted(){}},G=Y,V=(i("e068"),Object(g["a"])(G,q,K,!1,null,"5c243be0",null)),J=V.exports,z=i("a7ab"),Z=i.n(z),Q=(i("7b8d"),i("6a2c"),{name:"select-address",components:{"address-card":F,"add-address-card":J,"vue-slick-carousel":Z.a},methods:{addressSelected(e){this.selectedAddress===(null===e||void 0===e?void 0:e.id)?this.selectedAddress=null:this.selectedAddress=null===e||void 0===e?void 0:e.id,Object(n["k"])(()=>{this.$emit("addressSelected",e)},0)()},isLastElement(e){return e===this.addressList.length-1},localStorageChangeHandler(){this.selectedAddress=a["a"].getItem(a["b"].SELECTED_ADDRESS)||null},sortedAddresses(e){var t;return this.$emit("getAddressList",e),null!==(t=null===e||void 0===e?void 0:e.slice().sort((e,t)=>e.id===this.selectedAddress||null==this.selectedAddress&&e.is_default_address?-1:0))&&void 0!==t?t:[]}},mounted(){var e,t,i,s,d;this.isMobileLayout=Object(n["m"])(!0),this.localStorageChangeHandler(),this.isMobileLayout&&(this.settings.slidesToShow=1.7,this.settings.slidesToScroll=1),window.addEventListener("storage",this.localStorageChangeHandler),null===(e=FPI)||void 0===e||null===(t=e.state)||void 0===t||null===(i=t.global)||void 0===i||null===(s=i.location)||void 0===s||null===(d=s.subscribe)||void 0===d||d.call(s,e=>{this.fpiPincode=null===e||void 0===e?void 0:e.pincode}),this.fromReviewPage=this.$route.query.__view},beforeDestroy(){var e,t,i,s,d;window.removeEventListener("storage",this.localStorageChangeHandler),null===(e=FPI)||void 0===e||null===(t=e.state)||void 0===t||null===(i=t.global)||void 0===i||null===(s=i.location)||void 0===s||null===(d=s.unsubscribe)||void 0===d||d.call(s,e=>{this.fpiPincode=null===e||void 0===e?void 0:e.pincode})},data:function(){return{isMobileLayout:!1,selectedAddress:null,imgbaseURL:y["a"].BaseUrl,settings:{dots:!0,dotsClass:"slick-dots custom-dot-class",edgeFriction:.35,infinite:!1,speed:500,slidesToShow:2.5,slidesToScroll:2,prevArrow:`<img :src="${this.imgbaseURL}images/arrow-left.png" />`,nextArrow:`<img :src="${this.imgbaseURL}images/arrow-right.png" />`},fpiPincode:null,fromReviewPage:""}}}),X=Q,ee=(i("dcbf"),Object(g["a"])(X,j,N,!1,null,null,null)),te=ee.exports,ie={name:"pincode-card-content",components:{"sign-in-btn":$,"select-address":te},data(){return{}},methods:{addressSelected(e){this.$emit("addressSelected",e)},getAddressList(e){this.$emit("getAddressList",e)}}},se=ie,de=(i("341d"),Object(g["a"])(se,O,U,!1,null,"4f6f1459",null)),oe=de.exports,ae=function(){var e=this,t=e._self._c;return t("fdk-addresses",{ref:"addressList",scopedSlots:e._u([{key:"default",fn:function(i){return[e.fromReviewPage&&"fromReviewPage"===e.fromReviewPage?t("div",{staticClass:"pincode-bottom"},[t("div",{staticClass:"text-start footer-text d-flex",on:{click:function(t){return e.onAddNewAddress(i)}}},[t("img",{attrs:{src:e.imgbaseURL+"images/add-address-icon.svg"}}),t("span",[e._v("Add new address")])])]):t("div",{staticClass:"pincode-bottom"},[t("div",{staticClass:"text-start footer-text d-flex enter-pincode-text",on:{click:e.enterPincodeClick}},[t("img",{attrs:{src:e.imgbaseURL+"images/pincode.svg"}}),t("span",[e._v("Enter a PIN Code")])]),t("div",{staticClass:"text-start footer-text d-flex",on:{click:e.detectLocation}},[t("img",{attrs:{src:e.imgbaseURL+"images/ic_camera_focus.svg"}}),t("span",[e._v("Detect my location")])]),t("div",{staticClass:"text-start note-text d-flex",attrs:{"data-v-6a8bee92":""}},[e.message?t("span",{staticClass:"note",class:{"success-note":!e.hasError,"error-note":e.hasError}},[e._v(e._s(e.message))]):e._e()])])]}}])})},ne=[],re=i("4272"),le=i("dae6"),ce=i.n(le),ue={name:"pincode-card-footer",props:{libraries:{type:Array,default:()=>["places"]}},mixins:[P["a"]],data(){return{detectLocationPincode:0,message:null,pincode_state:null,pincode_city:null,hasError:null,google:null,apiKey:Object(n["A"])(),imgbaseURL:y["a"].BaseUrl,fromReviewPage:""}},mounted(){this.apiKey=Object(n["A"])(),this.loadGoogleMap(),window.DetectLocationInterface={getLocationFromLatAndLong:this.getLocationFromLatAndLong},this.fromReviewPage=this.$route.query.__view},methods:{onAddNewAddress(e){var t,i;if((null===e||void 0===e||null===(t=e.addresses)||void 0===t||null===(i=t.address)||void 0===i?void 0:i.length)>=10)this.$emit("addressSelected",null),this.$router.push("/profile/address");else{this.$emit("addressSelected",null);const e=encodeURIComponent(this.$route.fullPath);this.$router.push("/profile/address?edit=true&last_page=true&page_url="+e)}},detectLocation(){if(Object(n["cb"])()){this.$router.currentRoute.path;this.getLocation(),this.loading=!0}else"function"===typeof this.getCurrentLocation&&this.getCurrentLocation()},loadGoogleMap(){if(this.apiKey)if(ce.a.google)this.google=ce.a.google;else{const e=new re["a"]({libraries:this.libraries,apiKey:this.apiKey});e.load().then(e=>{this.google=e})}},getLocationFromLatAndLong(e,t){if(!e||!t)return this.hasError=!0,void(this.message="Unable to get location");this.geoCoder=new google.maps.Geocoder;let i={lat:Number(e),lng:Number(t)};this.geoCoder.geocode({location:i},(e,t)=>{if("OK"===t&&e[0]){let t=e[0].address_components,i=0;for(let e=0,s=t.length;e<s;e++)if(t[e]["types"].includes("postal_code")){i=+t[e].long_name,this.detectLocationPincode=i,this.message=this.detectLocationPincode;this.detectLocationPincode;this.$apiSDK.logistic.getPincodeCity({pincode:this.detectLocationPincode.toString()}).then(e=>{let t=e.data;if(Array.isArray(t)&&t.length>0){this.pincode_state=t[0].parents[1].display_name,this.pincode_city=t[0].parents[2].display_name,this.hasError=!1,this.message=this.pincode_city+", "+this.pincode_state;this.$router.currentRoute.path;Object(n["cb"])()&&(this.getDefaultAddress(this.detectLocationPincode,this.pincode_city,this.pincode_state),this.loading=!1),Object(n["k"])(()=>{this.$emit("updatePincode",{pincode_city:this.pincode_city,pincode_state:this.pincode_state,userPincode:this.detectLocationPincode}),a["a"].removeItem(a["b"].SELECTED_ADDRESS),a["a"].removeItem(a["b"].USER_NAME)},500)()}else this.loading=!1,this.hasError=!0,this.message="Unable to get location details"}).catch(e=>{console.log(e,"err"),this.hasError=!0,this.message=e,this.loading=!1})}}})},getCurrentLocation(){const e=["/cart/bag"],t=this.$router.currentRoute.path;if(navigator&&!("geolocation"in navigator))return console.warn("Geolocation is not available."),this.hasError=!0,void(this.message="Permission required to access your location.");navigator.geolocation.getCurrentPosition(i=>{e.includes(t)||Object(n["cb"])()&&this.showNavBar(),this.getLocationFromLatAndLong(i.coords.latitude,i.coords.longitude)},e=>{(null===e||void 0===e?void 0:e.code)&&1===e.code?this.message="Unable to get location details":this.message=e.message,this.hasError=!0})},enterPincodeClick(){this.$emit("toggle-component")}}},pe=ue,he=(i("e141"),Object(g["a"])(pe,ae,ne,!1,null,"1cb1d0b2",null)),ve=he.exports,me={name:"pincode-base-form",components:{"pincode-card-header":_,"pincode-card-content":oe,"pincode-card-footer":ve},data(){return{addressList:[]}},methods:{toggleComponent(){this.$emit("toggle-component")},getDescription(){var e,t,i,s,d,o;return(null===(e=FPI)||void 0===e||null===(t=e.state)||void 0===t||null===(i=t.user)||void 0===i||null===(s=i._data)||void 0===s||null===(d=s.user)||void 0===d?void 0:d.user_id)?this.addressList&&(null===(o=this.addressList)||void 0===o?void 0:o.length)?"Select delivery address to check product availability, offers, and more.":"You don't have any address saved!":"Sign in or set delivery location to check product availability, offers and more."},updatePincode(e){this.$emit("updatePincode",e)},addressSelected(e){this.$emit("addressSelected",e)},getAddressList(e){this.addressList=e}}},be=me,ge=Object(g["a"])(be,w,D,!1,null,"53d73665",null),fe=ge.exports,_e={name:"pincode-card",components:{"pincode-base-form":fe,"pincode-area-input-form":A},data(){return{currentComponent:"pincode-base-form"}},methods:{toggleComponent(){this.currentComponent="pincode-base-form"===this.currentComponent?"pincode-area-input-form":"pincode-base-form"},updatePincode(e){this.$emit("updatePincode",e)},addressSelected(e){this.$emit("addressSelected",e)}}},ye=_e,Pe=(i("3ebe"),Object(g["a"])(ye,l,c,!1,null,"fcd83bbe",null)),Ee=Pe.exports,Ce={name:"Pincode",components:{modal:o["a"],"pincode-card":Ee,PincodeCardFooter:ve},props:{global_config:Object,context:Object,userdetails:String,isSearchOpen:{type:Boolean,default:!1},navBarAction:{type:Boolean,default:!0},devicetype:{type:String,enum:["desktop","mobile"],default:""}},mixins:[P["a"]],data(){return{modalVisible:!1,locationObject:null,selectedAddress:a["a"].getItem(a["b"].SELECTED_ADDRESS)||null,isMobileLayout:!1,showDeliveryPopup:!1,username:"",pincode_city:"",userPincode:"",imgbaseURL:y["a"].BaseUrl,isPdpCall:!1,fromReviewPage:"",queryParams:{...this.$route.query}}},watch:{"$route.query"(e){Object(n["ob"])("fromReviewPage",this.$router),this.isPdpCall||(Object.values(e).includes(r["a"].Serviceability)||Object.values(e).includes("fromReviewPage")?this.modalVisible=!0:this.modalVisible=!1)},showDeliveryPopup:function(e){!0!==e||this.isMobileLayout?document.body.style.overflow="":document.body.style.overflow="hidden"}},async mounted(){this.isMobileLayout=Object(n["m"])(!0),this.fromReviewPage=this.$route.query.__view;const e=a["a"].getItem(a["b"].SHOW_PINCODE_POPUP_ON_CART)||!1;!e&&this.fromReviewPage&&"fromReviewPage"==this.fromReviewPage&&(this.showHideDeliveryPopup(!0),a["a"].addOrUpdateItem(a["b"].SHOW_PINCODE_POPUP_ON_CART,!0)),Object(n["ob"])(r["a"].Serviceability,this.$router),!this.isMobileLayout&&this.fromReviewPage&&"fromReviewPage"==this.fromReviewPage&&Object(n["ob"])("fromReviewPage",this.$router),console.log("selectedAddress",this.selectedAddress);let t=this;""!=t.selectedAddress&&null!=t.selectedAddress&&void 0!=t.selectedAddress?(this.getUserDetail(""),this.getCustomerAddress()):this.getCustomerAddress(),(this.isMobileLayout&&"mobile"===this.devicetype||!this.isMobileLayout&&"desktop"===this.devicetype||Object(n["cb"])())&&this.getFPIDetails(),document.addEventListener("click",this.onDocumentClick),window.PinCodeInterface={showWebAddressPopUp:this.showHideDeliveryPopup.bind(this)},window.AddressPopuptInterface={sendAddressDetailsToWeb:this.sendAddressDetailsToWeb.bind(this)}},beforeDestroy(){document.removeEventListener("click",this.onDocumentClick),Object(n["ob"])("fromReviewPage",this.$router),a["a"].removeItem(a["b"].SHOW_PINCODE_POPUP_ON_CART)},destroyed(){var e,t,i,s;(null===(e=FPI)||void 0===e||null===(t=e.state)||void 0===t||null===(i=t.global)||void 0===i?void 0:i.location)&&(null===(s=FPI.state.global.location)||void 0===s||s.unsubscribe(this.getPincode.bind(this)))},computed:{isDesktop(){return window.innerWidth>=1024}},created(){this.$root.$on("headerDeliveryPopup",this.pdpAddPopup),this.queryParams={...this.$route.query},"ios"!==this.queryParams.__application&&"android"!==this.queryParams.__application||"undefined"!==typeof window&&(window.PinCodeInterface={showWebAddressPopUp:this.showHideDeliveryPopup.bind(this)},window.AddressPopuptInterface={sendAddressDetailsToWeb:this.sendAddressDetailsToWeb.bind(this)})},updated(){"ios"!==this.queryParams.__application&&"android"!==this.queryParams.__application||"undefined"!==typeof window&&(window.PinCodeInterface={showWebAddressPopUp:this.showHideDeliveryPopup.bind(this)},window.AddressPopuptInterface={sendAddressDetailsToWeb:this.sendAddressDetailsToWeb.bind(this)})},updated(){let e=this;-1==this.$route.path.indexOf("/cart/checkout")&&(window.addressModifiedOnNative=async t=>{let i=JSON.parse(t);if(e.$refs["main-pdp-pincode"]){let t={};t.id=i.addressId,await e.$apiSDK.cart.getAddressById({id:t.id}).then(e=>{console.log("pincodeUpdate",e),this.selectedAddress=null===t||void 0===t?void 0:t.id,a["a"].addOrUpdateItem(a["b"].SELECTED_ADDRESS,null===t||void 0===t?void 0:t.id)}).catch(e=>{})}})},methods:{async getFPIDetails(){var e,t,i,s;(null===(e=FPI)||void 0===e||null===(t=e.state)||void 0===t||null===(i=t.global)||void 0===i?void 0:i.location)?(null===(s=FPI.state.global.location)||void 0===s||s.subscribe(e=>{console.log("fpiResponse",e),this.locationObject=e,this.userPincode=null===e||void 0===e?void 0:e.pincode,this.pincode_city=null===e||void 0===e?void 0:e.city}),this.locationObject?this.getPincode(this.locationObject):this.setDefaultPincode()):this.setDefaultPincode()},sendAddressDetailsToWeb(e,t,i,s){return Object(n["Z"])(this.$router)?(this.appSendAddressDetailsToWeb(e,t,i,s),"reload"):i?a["a"].getItem(a["b"].USER_PINCODE)!==e||a["a"].getItem(a["b"].SELECTED_ADDRESS)!==i?this.selectedAddress?(this.appSendAddressDetailsToWeb(e,t,i,s),"reload"):(this.selectedAddress=i,a["a"].addOrUpdateItem(a["b"].SELECTED_ADDRESS,i),a["a"].addOrUpdateItem(a["b"].USER_PINCODE,e),a["a"].addOrUpdateItem(a["b"].USER_CITY,t),a["a"].addOrUpdateItem(a["b"].USER_NAME,s),a["a"].addOrUpdateItem(a["b"].USER_SELECTED_LAB,!0),"no-reload"):"no-reload":a["a"].getItem(a["b"].USER_PINCODE)!==e?(this.appSendAddressDetailsToWeb(e,t,i,s),"reload"):"no-reload"},async appSendAddressDetailsToWeb(e,t,i,s){try{if(i){var d;const e=await this.$apiSDK.cart.getAddressById({id:i});await(null===(d=this.$refs["main-pdp-pincode"])||void 0===d?void 0:d.validatePincode(null===e||void 0===e?void 0:e.area_code)),this.addressSelected(e)}else this.setPincodeData(t,e,s)}catch(err){console.error("Error in sendAddressDetailsToWeb:",err)}},setPincodeData(e,t,i=""){var s,d,o;this.pincode_city=e,this.userPincode=t,this.getUserDetail(i),a["a"].addOrUpdateItem(a["b"].USER_PINCODE,t),a["a"].addOrUpdateItem(a["b"].USER_CITY,e),a["a"].removeItem(a["b"].SELECTED_ADDRESS),a["a"].removeItem(a["b"].USER_NAME),a["a"].addOrUpdateItem(a["b"].USER_SELECTED_LAB,!0),this.pincode_city.length>=12&&(this.pincode_city=this.pincode_city.slice(0,10)+".."),null===(s=this.$refs["main-pdp-pincode"])||void 0===s||null===(d=s.validatePincode)||void 0===d||null===(o=d.call(s,this.userPincode))||void 0===o||o.then(()=>{var e,t;null===(e=window)||void 0===e||null===(t=e.location)||void 0===t||t.reload()})},getCustomerAddress(){this.$apiSDK.cart.getAddresses().then(e=>{var t;let i;const s=null!==(t=null===e||void 0===e?void 0:e.address)&&void 0!==t?t:[];var d,o,n,r,l,c,u,p,h,v;(this.selectedAddress?i=null===s||void 0===s?void 0:s.find(e=>this.selectedAddress===e.id):this.userPincode&&(i=null===s||void 0===s?void 0:s.find(e=>(null===e||void 0===e?void 0:e.area_code)===this.userPincode)),i||(i=null===s||void 0===s?void 0:s.find(e=>null===e||void 0===e?void 0:e.is_default_address)),console.log("customerAddress",i),i&&Object.keys(i).length>0)&&((null===(d=i)||void 0===d?void 0:d.area_code)!=JSON.parse(a["a"].getItem(a["b"].USER_PINCODE))&&JSON.parse(a["a"].getItem(a["b"].USER_PINCODE))!=(null===(o=this.global_config)||void 0===o||null===(n=o.props)||void 0===n?void 0:n.defaultPincode)||(this.selectedAddress=i,this.pincode_city=null===(r=i)||void 0===r?void 0:r.city,this.userPincode=null===(l=i)||void 0===l?void 0:l.area_code,this.username=null===(c=i)||void 0===c?void 0:c.name,a["a"].addOrUpdateItem(a["b"].SELECTED_ADDRESS,null===(u=i)||void 0===u?void 0:u.id),a["a"].addOrUpdateItem(a["b"].USER_PINCODE,this.userPincode),a["a"].addOrUpdateItem(a["b"].USER_CITY,this.pincode_city),a["a"].addOrUpdateItem(a["b"].USER_STATE,null===(p=i)||void 0===p?void 0:p.state),a["a"].addOrUpdateItem(a["b"].USER_NAME,this.username),this.updatePincodeApp()));this.userPincode&&(null===(h=this.$refs["main-pdp-pincode"])||void 0===h||null===(v=h.validatePincode)||void 0===v||v.call(h,this.userPincode))}).catch(e=>{console.log("err",e)})},setDefaultPincode(){var e,t,i,s;this.userPincode=null===(e=this.global_config)||void 0===e||null===(t=e.props)||void 0===t?void 0:t.defaultPincode,this.pincode_city=null===(i=this.global_config)||void 0===i||null===(s=i.props)||void 0===s?void 0:s.defaultCity,this.username="",console.log("defaultAddress",this.userPincode,this.pincode_city),this.$refs["main-pdp-pincode"]&&(this.$refs["main-pdp-pincode"].validatePincode(this.userPincode),a["a"].addOrUpdateItem(a["b"].USER_PINCODE,this.userPincode),a["a"].addOrUpdateItem(a["b"].USER_CITY,this.pincode_city)),this.updatePincodeApp()},updatePincodeApp(){const e=this.formatString(this.username,10)||"",t=this.formatString(a["a"].getItem(a["b"].USER_CITY),12)||"",i=a["a"].getItem(a["b"].USER_PINCODE)||"",s=[e,t].filter(Boolean).join(", ");""!==t&&""!==i&&this.onPinCodeUpdate(s,i)},pdpAddPopup(e){this.isPdpCall=!0,this.$refs.deliveryAddress,this.showHideDeliveryPopup(e)},showHideDeliveryPopup(e){this.showDeliveryPopup=e,1==e?(Object(n["cb"])()&&this.navBarAction&&(console.log("windowinterfacenow"),P["a"].methods.hideNavBar()),this.isMobileLayout&&this.modalHandle(),this.isSearchOpen&&this.$emit("close-search",{closeSearch:!0})):(a["a"].removeItem(a["b"].SHOW_PINCODE_POPUP_ON_CART),Object(n["cb"])()&&this.navBarAction&&P["a"].methods.showNavBar(),this.showDeliveryPopup=!1,!this.isMobileLayout&&this.fromReviewPage&&"fromReviewPage"==this.fromReviewPage&&a["a"].addOrUpdateItem(a["b"].SHOW_PINCODE_POPUP_ON_CART,!0))},formatString(e="",t){return e?(e=e.toLowerCase().replace(/\b\w/g,e=>e.toUpperCase()),e.length>t?e.slice(0,t)+"..":e):""},onDocumentClick(e){try{var t,i,s;this.isPdpCall||!this.$refs.deliveryPopup||(null===(t=this.$refs.deliveryPopup)||void 0===t||null===(i=t.contains)||void 0===i?void 0:i.call(t,e.target))||!this.$refs.deliveryAddress||(null===(s=this.$refs.deliveryAddress)||void 0===s?void 0:s.contains(e.target))||e.target.parentElement.classList.contains("enter-pincode-text")||this.isMobileLayout||this.showHideDeliveryPopup(!1)}catch(err){console.log("err",err)}},getUserDetail(e){null!=a["a"].getItem(a["b"].USER_NAME)&&""==e&&(e=a["a"].getItem(a["b"].USER_NAME)),void 0!==e&&!e.includes("undefined")&&e.length>=10?this.username=e.slice(0,10)+"..":this.username=e},getPincode(e){(null===e||void 0===e?void 0:e.pincode)&&""!==e.pincode?(this.userPincode=e.pincode,this.pincode_city=e.city,a["a"].addOrUpdateItem(a["b"].USER_PINCODE,null===e||void 0===e?void 0:e.pincode),a["a"].addOrUpdateItem(a["b"].USER_CITY,null===e||void 0===e?void 0:e.city),a["a"].addOrUpdateItem(a["b"].USER_STATE,null===e||void 0===e?void 0:e.state),this.updatePincodeApp()):this.setDefaultPincode()},onCloseModal(){const e=["/cart/bag"],t=this.$router.currentRoute.path;e.includes(t)||Object(n["cb"])()&&this.navBarAction&&this.showNavBar(),this.modalVisible=!1,this.error="",this.showError=!1,Object(n["ob"])("fromReviewPage",this.$router),a["a"].removeItem(a["b"].SHOW_PINCODE_POPUP_ON_CART)},modalHandle(){this.modalVisible=!0,this.fromReviewPage||Object(n["tb"])(this.$router,r["a"].Serviceability)},updatePincode(e){var t,i,s;this.pincode_city=e.pincode_city,this.userPincode=e.userPincode,Object(n["cb"])()&&this.getDefaultAddress(e.userPincode,e.pincode_city,e.pincode_state),this.getUserDetail(""),a["a"].addOrUpdateItem(a["b"].USER_PINCODE,this.userPincode),a["a"].addOrUpdateItem(a["b"].USER_CITY,this.pincode_city),a["a"].addOrUpdateItem(a["b"].USER_STATE,e.pincode_state),this.pincode_city.length>=12&&(this.pincode_city=this.pincode_city.slice(0,10)+".."),a["a"].addOrUpdateItem(a["b"].USER_CHANGED_PINCODE,!0),this.showHideDeliveryPopup(!1),null===(t=this.$refs["main-pdp-pincode"])||void 0===t||null===(i=t.validatePincode)||void 0===i||null===(s=i.call(t,this.userPincode))||void 0===s||s.then(()=>{var e,t;null===(e=window)||void 0===e||null===(t=e.location)||void 0===t||t.reload()})},addressSelected(e){if(null!=e){var t,i,s,d;if(this.pincode_city=null===e||void 0===e?void 0:e.city,this.userPincode=null===e||void 0===e?void 0:e.area_code,this.getUserDetail(null===e||void 0===e?void 0:e.name),this.selectedAddress=e,a["a"].addOrUpdateItem(a["b"].USER_PINCODE,this.userPincode),a["a"].addOrUpdateItem(a["b"].USER_CITY,this.pincode_city),a["a"].addOrUpdateItem(a["b"].SELECTED_ADDRESS,null===e||void 0===e?void 0:e.id),a["a"].addOrUpdateItem(a["b"].USER_STATE,null===e||void 0===e?void 0:e.state),(null===(t=this.pincode_city)||void 0===t?void 0:t.length)>=12)this.pincode_city=(null===(d=this.pincode_city)||void 0===d?void 0:d.slice(0,12))+"..";this.$root.$emit("address-selected"),Object(n["ob"])("fromReviewPage",this.$router),a["a"].addOrUpdateItem(a["b"].USER_SELECTED_LAB,!0),a["a"].addOrUpdateItem(a["b"].USER_CHANGED_PINCODE,!0),null===(i=window)||void 0===i||null===(s=i.location)||void 0===s||s.reload()}this.showHideDeliveryPopup(!1)}}},Se=Ce,Ae=(i("5196"),Object(g["a"])(Se,s,d,!1,null,"9f1f9366",null));t["a"]=Ae.exports}}]);
//# sourceMappingURL=zWvzH8L93_themeBundle.umd.min.header_products.js.map